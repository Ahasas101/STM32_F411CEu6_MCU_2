#include "main.h"
#include "stm32f1xx_hal.h"
#include "stm32f1xx_hal_tim.h"

void HAL_TIM_Base_MspInit(TIM_HandleTypeDef *htim)
{
	__HAL_RCC_TIM2_CLK_ENABLE();

	HAL_NVIC_SetPriority(TIM2_IRQn, 14, 0);
	HAL_NVIC_EnableIRQ(TIM2_IRQn);

}



void HAL_CAN_MspInit(CAN_HandleTypeDef *hcan)
{
	__HAL_RCC_CAN1_CLK_ENABLE();
	__HAL_RCC_GPIOA_CLK_ENABLE();

	HAL_NVIC_SetPriority(CAN1_TX_IRQn, 15, 0);
	HAL_NVIC_SetPriority(CAN1_RX0_IRQn, 15, 0);
	HAL_NVIC_SetPriority(CAN1_RX1_IRQn, 15, 0);
	HAL_NVIC_SetPriority(CAN1_SCE_IRQn, 15, 0);

	HAL_NVIC_EnableIRQ(CAN1_TX_IRQn);
	HAL_NVIC_EnableIRQ(CAN1_RX0_IRQn);
	HAL_NVIC_EnableIRQ(CAN1_RX1_IRQn);
	HAL_NVIC_EnableIRQ(CAN1_SCE_IRQn);

	GPIO_InitTypeDef can;
	can.Mode = GPIO_MODE_AF_PP;
	can.Pin = GPIO_PIN_11 | GPIO_PIN_12;
	can.Speed = GPIO_SPEED_FREQ_MEDIUM;
	can.Pull = GPIO_NOPULL;
	HAL_GPIO_Init(GPIOA, &can);

}
